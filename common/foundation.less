// out: foundation.css, compress: true
@import "normalize";
@import "color-scheme";

@page-width: 1200px;
@header-width: 300px;
@content-width: 850px;

@eye-catch-side: 130px;

@subject-font-size: 18px;
@standard-font-size: 14px;
@sub-font-size: 12px;
@toc-font-size: 11px;
@tiny-font-size: 10px;
@credit-font-size: 8px;
@icon-side: 16px;

@main-pane:   100;
@header-pane: 200;
@toc-pane:    300;

.disable-select() {
	user-select: none;
	-webkit-user-select: none;
	-moz-user-select: none;
	-ms-user-select: none;
}

.slant-stripe-background( @color, @opacity ) {
	background: -webkit-repeating-linear-gradient( -45deg, fade( @color, @opacity ), fade( @color, @opacity ) 2px, transparent 2px, transparent 4px );
	background: -moz-repeating-linear-gradient( -45deg, fade( @color, @opacity ), fade( @color, @opacity ) 2px, transparent 2px, transparent 4px );
	background: -ms-repeating-linear-gradient( -45deg, fade( @color, @opacity ), fade( @color, @opacity ) 2px, transparent 2px, transparent 4px );
	background: repeating-linear-gradient( -45deg, fade( @color, @opacity ), fade( @color, @opacity ) 2px, transparent 2px, transparent 4px );
}

// universal
body {
	background:     url( background.jpg ) fixed;
	color:          @key-tone;
	font-family:    Candara, Meiryo, sans-serif;
	font-size:      @standard-font-size;
	letter-spacing: 0.5px;
	line-height:    1.8;
	width:          @page-width;
}

::selection       { background: @selection-color; }
::-moz-selecttion { background: @selection-color; }

// primitive
a, a:visited {
	color:           @link-color;
	text-decoration: none;
}

a:hover {
	color: @accent-linkc-color;
}

p {
	margin: 0 0 10px 0;
}

strong {
	.slant-stripe-background( @strong-color, 25% );
	border-radius: 4px;
	font-weight:   inherit;
	padding:       0 4px;
}

del {
	color: @sub-key-tone;
}

table {
	border:          none;
	border-collapse: collapse;
	table-layout:    fixed;
	font-size:       @sub-font-size;
	margin:          10px 10px 10px 20px;
}

th {
	background-color: @table-head;
	box-sizing:       border-box;
	border:           none;
	padding:          2px 10px;
}

td {
	border:           none;
	box-sizing:       border-box;
	border-bottom:    1px solid @tertiary-color;
	padding:          2px 10px;
	white-space:      nowrap;
	vertical-align:   top;
	&:last-child { white-space: normal; }
}

hr {
	background-color: @tertiary-color;
	border:           none;
	margin:           3px 0;
	height:           2px;
	width:            100%;
	&.skip {
		background: none;
		height:     10px;
		margin:     0;
	}
	&.offset-killer {
		background: transparent;
		border:     none;
		clear:      both;
		height:     0;
		margin:     0;
		padding:    0;
		width:      100%;
	}
	&.clearfix {
		background: none;
		height:     0;
	}
}

ul {
	clear:       both;
	list-style:  none;
	margin-left: 15px;
	padding:     0;
	> li {
		padding-left: 15px;
	}
	& + p { margin-top: 10px; }
}

// layout
header {
	background-image:      url( meta-background.jpg );
	background-position:   top center;
	background-repeat:     no-repeat;
	background-size:       cover;
	color:                 #ffffff;
	height:                100%;
	position:              fixed;
	width:                 @header-width;
	z-index:               @header-pane;
}
	#header-content {
		cursor:       pointer;
		height:       100%;
		table-layout: fixed;
		width:        100%;
	}
	#page-info {
		color:    #ffffff;
		display:  block;
		margin:   0;
		position: absolute;
		top:      45%;
		.disable-select();
		&:hover, &:visited { color: #ffffff; }
	}
	.page-headings {
		display:     block;
		font-weight: normal;
		text-align:  center;
		width:       @header-width;
	}
	#meta-info {
		font-size: @sub-font-size;
	}
	#major-title {
		font-size: @subject-font-size;
	}
	#title-divider {
		border-top: 1px solid @separator-color;
		margin:     0 auto;
		width:      50%;
	}
	#minor-title {
		font-size: @standard-font-size;
	}

footer {
	font-size:  @sub-font-size;
	position:   absolute;
	text-align: center;
	top:        75%;
	ul {
		padding: 0;
		margin:  0;
		a, a:visited, a:hover { color: #ffffff; }
	}
		li {
			display: inline-block;
			padding: 0 10px;
			&:first-child {
				width: 100%;
			}
		}
}
	.basis-icon {
		background:     url( "basis-icons.png" ) no-repeat;
		display:        inline-block;
		font-size:      @sub-font-size;
		height:         @icon-side;
		line-height:    @sub-font-size;
		margin-right:   5px;
		vertical-align: text-bottom;
		width:          @icon-side;
		&.me { background-position: 0   0  ; }
		&.tw { background-position: 0 -16px; }
		&.gh { background-position: 0 -32px; }
		// &.wb { background-position: 0 -48px; }
		// &.wp { background-position: 0 -64px; }
		&.ex { background-position: 0 -80px; }
	}
#credit {
	cursor:      default;
	font-size:   @credit-font-size;
	line-height: 1;
	text-align:  center;
	position:    absolute;
	bottom:      0;
	width:       100%;
}

article {
	:first-child { margin-top: 0; }
}

main {
	margin-left: 300px;
	width:       @content-width;
	z-index:     @main-pane;
	a, a:visited {
		&[href^="http"]::after {
			content:        " ";
			background:     url( "basis-icons.png" ) no-repeat 0 -48px;
			display:        inline-block;
			font-size:      @sub-font-size;
			height:         @icon-side;
			line-height:    @sub-font-size;
			margin-left:    2px;
			vertical-align: text-bottom;
			width:          @icon-side;
		}
		&[href*="wikipedia"]::after {
			content:        " ";
			background:     url( "basis-icons.png" ) no-repeat 0 -64px;
			display:        inline-block;
			font-size:      @sub-font-size;
			height:         @icon-side;
			line-height:    @sub-font-size;
			margin-left:    2px;
			vertical-align: text-bottom;
			width:          @icon-side;
		}
	}
}

#main-inner {
	padding: 50px 0 50px 30px;
}

h3 { // head level-1
	border-bottom: 2px solid @secondary-color;
	font-size:     @subject-font-size;
	clear:         both;
	margin:        10px 0 10px 0;
}

h4 {
	// head level-2
	clear:     both;
	font-size: @standard-font-size;
	margin:    20px 0 0 0;
	width:     100%;
}

h5, h6 {
	// head level-3/x
	clear:        both;
	font-size:    @standard-font-size;
	margin:       20px 0 0 0;
	width:        100%;
	&::before {
		background:     fade( @CadmiumOrange, 20% );
		border-radius:  3px;
		content:        " ";
		display:        inline-block;
		height:         12px;
		margin:         0 5px 4px 4px;
		vertical-align: middle;
		width:          12px;
	}
}

	blockquote {
		background:    @quote-background;
		border-left:   4px solid @secondary-color;
		border-radius: 0 4px 4px 0;
		clear:         both;
		margin:        25px 34px 25px 25px;
		padding:       20px 20px 5px 20px;
		font-size:     @sub-font-size;
		width:         540px;
		hr {
			background:    none;
			margin-bottom: 10px;
		}
		.ref {
			color:       @sub-key-tone;
			margin:      10px 12px 0 0;
			text-align:  right;
			font-size:   @sub-font-size;
			line-height: 1.6;
			.cite {
				display: block;
				&::before { content: "― "; }
			}
			.origin {
				display: block;
				&::after { content: " より"; }
			}
			&.foreign {
				font-style: oblique;
				.cite {
					&::before {
						content: "by ";
						font-style: normal;
					}
				}
				.origin {
					&::before {
						content: "from ";
						font-style: normal;
					}
					&::after { content: ""; }
				}
			}
		}
		&.ancient-lore {
			font-size: @sub-font-size;
		}
	}
	.epigraph {
		border-left:   none;
		border-radius: 4px 0 0 4px;
		border-right:  4px solid @secondary-color;
		font-size:     @sub-font-size;
		margin:        0 -4px 25px 74px;
		padding:       15px 20px 10px 20px;
		text-align:    right;
		width:         736px;
		.ref { margin: 6px 0 0 0; }
	}
	.figure {
		float: right;
		margin: 0 10px;
	}
	.figure-side-list {
		float: left;
	}
	.figures {
		float: right;
		padding: 10px;
		[href^="http"] {
			padding-right: 0;
			background: none;
		}
		img {
			margin-left: 10px;
		}
	}
	.illustration {
		margin: 0 10px;
		display: inline-block;
	}
	.caption {
		color: @Gargoyle;
		display: block;
		font-size: 12px;
		text-align: center;
	}

.math {
	margin: 0 20px;
}

article > p {
	margin: 0 40px 10px 40px;
}

article > ul {
	margin: 0 40px 10px 40px;
	li {
		padding-left: 1em;
		text-indent: -1em;
		th, td {
			text-indent: 0;
		}
	}
	li::before {
		background:    fade( @AzaleaPink,    50% );
		border-radius: 2px;
		content:       " ";
		display:       inline-block;
		height:        4px;
		margin-bottom: 3px;
		margin-right:  8px;
		width:         4px;
	}
	& ul > li::before {
		background:    fade( @ParrotGreen,   50% );
	}
	& ul > li > ul li::before {
		background:    fade( @CadmiumOrange, 50% );
	}
}

article ol {
	li::before {
		background: none;
	}
}

article .boxed {
	border:        2px solid rgba( 230, 103, 154, 0.4 );
	border-radius: 3px;
	clear:         both;
	margin:        20px 50px;
	padding:       5px 10px;
}

.block-anchor {
	margin:   10px 60px;
	overflow: hidden;
	position: relative;
	width:    600px;
	.guage {
		.slant-stripe-background( @link-color, 50% );
		border-radius: 3px;
		display:       block;
		height:        100%;
		left:          0;
		position:      absolute;
		top:           0;
		width:         5px;
	}
	a {
		height:   100%;
		left:     0;
		position: absolute;
		top:      0;
		width:    100%;
	}
	a[href^="http"]::after,
	a:visited[href^="http"]::after {
		background: none;
		height:     0;
		width:      0;
	}
	&:hover {
		color: @link-color;
		        transition: color 0.2s linear;
		-webkit-transition: color 0.2s linear;
		   -moz-transition: color 0.2s linear;
		     -o-transition: color 0.2s linear;
	}
	.link-eyecatch {
		float:  right;
		margin: 10px;
		img { box-shadow: none; }
	}
	.link-site {
		font-size:     16px;
		font-weight:   bold;
		height:        30px;
		margin:        10px 0 0 15px;
		overflow:      hidden;
		text-overflow: ellipsis;
		width:         400px;
		white-space:   nowrap;
		&::before {
			content:        " ";
			background:     url( "basis-icons.png" ) no-repeat 0 -80px;
			display:        inline-block;
			height:         @icon-side;
			margin-right:   5px;
			vertical-align: baseline;
			width:          @icon-side;
		}
		&.internal::before {
			content: "";
			background:     none;
			display:        inline;
			margin-right:   0;
			vertical-align: baseline;
		}
	}
	.link-title {
		line-height: 1.2;
		margin:      0 0 5px 15px;
		width:       420px;
	}
	.link-comment {
		font-size: 12px;
		margin:    10px 0 5px 15px;
		width:     420px;
	}
}

code {
	background-color: fade( @ParrotGreen, 15% );
	border: 1px solid @separator-color;
	border-radius: 2px;
	color: @Gargoyle;
	font-family: consolas, "Courier New", Meiryo, monospace;
	margin: 0 3px;
	padding: 0 3px;
}

pre code {
	background-color: fade( @ParrotGreen, 15% );
	border: none;
	border-radius: 5px;
	display: block;
	margin: 5px;
	padding: 5px 8px;
}

#toc {
	font-size: @toc-font-size;
	opacity:   0.3;
	position:  fixed;
	right:     0;
	top:       70px;
	z-index:   @toc-pane;
	.disable-select();
	&:hover {
		opacity:            1;
		transition:         opacity 0.2s linear;
		-webkit-transition: opacity 0.2s linear;
		-moz-transition:    opacity 0.2s linear;
		-o-transition:      opacity 0.2s linear;
	}
	a {
		background:    @toc-major;
		border-radius: 3px 0 0 3px;
		color:         @key-tone;
		padding:       1px 3px 1px 5px;
		&:hover {
			font-weight:   bold;
			padding-right: 20px;
		}
	}
	ul { margin: 0; }
	li {
		display:       block;
		margin-bottom: 5px;
		text-align:    right;
	}
	ul ul li {
		margin-bottom: 0;
		a { background: @toc-minor; }
	}
	ul ul ul li {
		margin-bottom: 0;
		a { background: @toc-extend; }
	}
}

li#back2top {
	margin-bottom: 15px;
	a { background: @toc-meta; }
}

li#jump2disqus {
	margin-top: 15px;
	a { background: @toc-meta; }
}

.skelton {
//	.title { .dialogue-header-primary() }
	box-sizing:    border-box;
	background:    transparent;
	clear:         both;
	counter-reset: note;
	font-size:     @sub-font-size;
	margin:        10px 34px 25px 25px;
	overflow:      hidden;
	padding:       10px 20px 5px 0;
	position:      relative;
	p {
		box-sizing: border-box;
		margin: 0 0 0 5px;
	}
	.descriptive {
		background:    @quote-background;
		border-radius: 4px;
		margin:        0 0 10px 0;
		padding:       5px 20px 5px 20px;
	}
	.skip {
		display: block;
		height:  1em;
	}
	.footer {
		clear:       both;
		color:       @sub-key-tone;
		font-size:   @tiny-font-size;
		line-height: 1.3;
		margin:      0 0 5px 0;
		overflow:    hidden;
		span {
			display:     block;
			float:       right;
			margin-left: 3px;
		}
	}
	.scripts {
		clear: both;
		float: left;
		p { margin-left: 10px; }
	}
	.types {
		background:    @quote-background;
		border-radius: 4px;
		margin:        0 0 10px 0;
		padding:       20px 0 20px 20px;
		text-align:    center;
	}
	.screenshots {
		float:  right;
		margin: 0 0 15px 0;
		img {
			box-shadow:    none;
			margin-bottom: 5px;;
		}
	}
}

// footnote suite
span.footnote {
	border-bottom: 1px solid @primary-color;
	&::after {
		content:           "*" counter( note );
		counter-increment: note;
		font-size:         @tiny-font-size;
		font-weight:       normal;
		padding-right:     3px;
		vertical-align:    super;
	}
	&:empty { border: none; }
}

span.manual-footnote {
	font-size:      @tiny-font-size;
	font-weight:    normal;
	padding-right:  3px;
	vertical-align: super;
}

hr.footnote {
	width:      306px; // (φ) : 494 + 306 = 800
	height:     1px;
	margin:     15px 0 10px 0;
	background: @tertiary-color;
}

ul.footnote {
	counter-reset: footnote;
	margin:        0 0 0 5px;
	&>li {
		background:   none;
		color:        @sub-key-tone;
		padding-left: 0;
		&::before {
			background:        none;
			content:           "*" counter( footnote );
			counter-increment: footnote;
			font-size:         @tiny-font-size;
			margin-right:      5px;
		}
		a, a:visited {
			color:      inherit;
			transition: 0.3s;
			&:hover { color: @link-color; }
		}
	}
}

.parallel {
	margin-left: 10px;
	p {
		float:       left;
		font-size:   @sub-font-size;
		margin-left: 20px;
		width:       390px;
	}
}

.restore {
	margin-left: 10px;
	p {
		float:       left;
		font-size:   @sub-font-size;
		margin-left: 20px;
		width:       360px;
	}
	.headings {
		display:    block;
		text-align: center;
	}
}

.ref-link {
	clear:         both;
	margin-top:    20px;
	margin-bottom: 8px;
	padding-left:  20px;
	position:      relative;
	&>.gauge {
		.slant-stripe-background( @strong-color, 50% );
		border-radius: 3px;
		display:       block;
		height:        100%;
		left:          6px;
		position:      absolute;
		top:           0;
		width:         6px;
	}
	h6 {
		background: none;
		font-size:  @sub-font-size;
		padding:    0 0 0 5px;
		margin:     0;
		&::after {
			content: "：";
		}
	}
}
